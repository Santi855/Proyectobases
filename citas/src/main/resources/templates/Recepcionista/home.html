<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Panel Recepcionista</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Hospital - Recepcionista</a>
        <div class="d-flex">
            <a href="/static" class="btn btn-outline-light">Cerrar sesi贸n</a>
        </div>
    </div>
</nav>

<div class="container mt-5">
    <div class="card shadow p-4">
        <h3 class="text-center text-primary mb-4">Bienvenida Recepcionista</h3>
        <p class="text-center">Has iniciado sesi贸n correctamente.</p>

        <div class="text-center mt-4">
            <a href="#" class="btn btn-success mx-2"> Gestionar Citas</a>
            <a href="#" class="btn btn-info mx-2"> Farmacia</a>
            <a href="#" class="btn btn-secondary mx-2">Ь Pagos</a>
        </div>
    </div>
</div>

<div id="calculo-ticket">
    <h2>Emitir Ticket de Pago</h2>
    <label for="idCitaInput">ID de la Cita:</label>
    <input type="number" id="idCitaInput" required>
    <button onclick="obtenerTotal()">Calcular Total y Emitir Ticket</button>
    <p id="resultadoTotal"></p>
</div>

<script>
    function obtenerTotal() {
        var idCita = document.getElementById('idCitaInput').value;
        
        if (!idCita) {
            alert("Por favor, ingrese un ID de Cita.");
            return;
        }

        // Hacemos una llamada AJAX (Fetch) al Controller
        fetch('/recepcionista/calcularTotal?idCita=' + idCita)
            .then(response => {
                // El controller devuelve un String simple, lo leemos como texto
                return response.text(); 
            })
            .then(data => {
                // Mostramos el resultado en el p谩rrafo
                document.getElementById('resultadoTotal').innerText = data;
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('resultadoTotal').innerText = 'Ocurri贸 un error de conexi贸n.';
            });
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
